<!DOCTYPE html>
<html lang="pt-BR">
<head>
ย ย <meta charset="UTF-8">
ย ย <meta name="viewport" content="width=device-width, initial-scale=1.0">
ย ย <title>Logรญstica Pro - Visรฃo Financeira Completa</title>
ย ยย
ย ย <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
ย ย <meta http-equiv="Pragma" content="no-cache">
ย ย <meta http-equiv="Expires" content="0">

ย ย <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
ย ยย
ย ย <link rel="stylesheet" href="style.css?v=1.0.2">
ย ย <style>
ย ย ย ย /* Ajustes especรญficos para o novo layout de colunas */
ย ย ย ย .wrapper {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย height: 100vh;
ย ย ย ย ย ย flex-direction: row;
ย ย ย ย ย ย overflow: hidden;
ย ย ย ย }

ย ย ย ย .sidebar {
ย ย ย ย ย ย width: 25%;
ย ย ย ย ย ย min-width: 320px;
ย ย ย ย ย ย height: 100%;
ย ย ย ย ย ย overflow-y: auto;
ย ย ย ย ย ย border-right: 1px solid var(--border-color);
ย ย ย ย ย ย z-index: 10;
ย ย ย ย }

ย ย ย ย #painel-custos-extra {
ย ย ย ย ย ย display: none;
ย ย ย ย ย ย width: 25%;
ย ย ย ย ย ย min-width: 320px;
ย ย ย ย ย ย height: 100%;
ย ย ย ย ย ย overflow-y: auto;
ย ย ย ย ย ย background: var(--bg-sidebar);
ย ย ย ย ย ย border-right: 1px solid var(--border-color);
ย ย ย ย ย ย padding: 20px;
ย ย ย ย }

ย ย ย ย .map-container {
ย ย ย ย ย ย flex-grow: 1;
ย ย ย ย ย ย position: relative;
ย ย ย ย ย ย height: 100%;
ย ย ย ย }

ย ย ย ย .custos-open #painel-custos-extra {
ย ย ย ย ย ย display: block;
ย ย ย ย }

ย ย ย ย @media print {
ย ย ย ย ย ย .sidebar, #painel-custos-extra, .top-nav { display: none; }
ย ย ย ย ย ย .map-container { width: 100%; }
ย ย ย ย }
ย ย </style>
</head>
<body>

<div class="wrapper" id="mainWrapper">
ย ย <div class="top-nav" id="topNav">
ย ย ย ย <a onclick="toggleFrota()"> Minha Frota</a>
ย ย ย ย <a onclick="toggleGoogleMaps()">๐บ๏ธ Roteiro Resumido</a>
ย ย ย ย <a onclick="document.getElementById('themeBtn').click()">๐ Modo</a>
ย ย ย ย <a onclick="window.print()">๐จ๏ธ Imprimir Relatรณrio</a>
ย ย </div>

ย ย <div id="painel-frota">
ย ย ย ย <div style="display:flex; justify-content: space-between; align-items: center;">
ย ย ย ย ย ย <h2 id="frota-titulo">Minha Frota</h2>
ย ย ย ย ย ย <span style="cursor:pointer; font-size:24px;" onclick="toggleFrota()">&times;</span>
ย ย ย ย </div>
ย ย ย ย <div style="margin-top:20px;">
ย ย ย ย ย ย <input type="hidden" id="f-edit-index" value="-1">
ย ย ย ย ย ย <label class="label-custo">Apelido Frota / Modelo Veiculo</label>
ย ย ย ย ย ย <input type="text" id="f-nome" placeholder="Ex: Carreta Frigorifica">
ย ย ย ย ย ยย
ย ย ย ย ย ย <div class="grid-configs">
ย ย ย ย ย ย ย ย <div>
ย ย ย ย ย ย ย ย ย ย <label class="label-custo">Nรบmero de Eixos</label>
ย ย ย ย ย ย ย ย ย ย <select id="f-eixos">
ย ย ย ย ย ย ย ย ย ย ย ย <option value="2">2 Eixos (Toco/VUC)</option>
ย ย ย ย ย ย ย ย ย ย ย ย <option value="3">3 Eixos (Truck/Pesado)</option>
ย ย ย ย ย ย ย ย ย ย ย ย <option value="4">4 Eixos (Articulados)</option>
ย ย ย ย ย ย ย ย ย ย ย ย <option value="5">5 Eixos (Carreta Simples)</option>
ย ย ย ย ย ย ย ย ย ย ย ย <option value="6">6 Eixos (Carreta LS)</option>
ย ย ย ย ย ย ย ย ย ย ย ย <option value="7">7 Eixos (Bitrem)</option>
ย ย ย ย ย ย ย ย ย ย ย ย <option value="9">9 Eixos (Rodotrem)</option>
ย ย ย ย ย ย ย ย ย ย ย ย <option value="11">11 Eixos (Super-Rodotrem)</option>
ย ย ย ย ย ย ย ย ย ย </select>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <div><label class="label-custo">Consumo Mรฉdio (Km/L)</label><input type="number" id="f-consumo" step="0.1" placeholder="Ex: 2.5"></div>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย <div class="grid-configs">
ย ย ย ย ย ย ย ย <div><label class="label-custo">Manutenรงรฃo (R$/Km)</label><input type="text" id="f-manut" placeholder="R$ 0,00" oninput="formatarMoeda(this)"></div>
ย ย ย ย ย ย ย ย <div><label class="label-custo">Arla 32 (% do diesel)</label><input type="number" id="f-arla" placeholder="Ex: 5" step="0.1"></div>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย <div class="f-checkbox">
ย ย ย ย ย ย ย ย <input type="checkbox" id="f-tem-frio" onchange="document.getElementById('f-box-frio').style.display = this.checked ? 'block' : 'none'">
ย ย ย ย ย ย ย ย <label for="f-tem-frio">Possui aparelho frio</label>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย <div id="f-box-frio" style="display:none; margin-top: 10px;">
ย ย ย ย ย ย ย ย <label class="label-custo">Consumo Aparelho Frio (L/Hora)</label>
ย ย ย ย ย ย ย ย <input type="number" id="f-consumo-frio" placeholder="Ex: 2.0" step="0.1">
ย ย ย ย ย ย </div>

ย ย ย ย ย ย <button class="calc-btn" onclick="salvarVeiculo()">Salvar Veรญculo</button>
ย ย ย ย </div>
ย ย ย ย <div class="lista-frota-content" id="lista-v-render"></div>
ย ย </div>

ย ย <div class="sidebar">
ย ย ย ย <div class="header-sidebar">
ย ย ย ย ย ย <h2>Roteirizador</h2>
ย ย ย ย ย ย <button style="background:none; border:none; color:red; cursor:pointer; font-size:10px;" onclick="window.location.reload()">Novo Frete</button>
ย ย ย ย ย ย <button class="theme-toggle" id="themeBtn" style="display:none;">๐</button>
ย ย ย ย </div>

ย ย ย ย <ul id="lista-pontos">
ย ย ย ย ย ย <li class="ponto-item item-saida" id="li-saida">
ย ย ย ย ย ย ย ย <span class="handle" style="cursor:default">๐</span>
ย ย ย ย ย ย ย ย <input id="saida" type="text" placeholder="Saรญda Deslocamento Vazio (Opcional)" autocomplete="off">
ย ย ย ย ย ย </li>
<div id="container-config-deslocamento" class="deslocamento-config">
ย ย <label style="font-size:10px; font-weight:700; color:var(--text-sub); margin-bottom:2px;">DESLOCAMENTO REMUNERADO</label>
ย ย <select id="tipoDeslocamento" onchange="atualizarFinanceiro()">
ย ย ย ย <option value="nao_remunerado">Nรฃo Remunerado</option>
ย ย ย ย <option value="remunerado_km">Remunerado R$ por KM vazio</option>
ย ย ย ย <option value="remunerado_rs">Remunerado R$ Fechado Deslocamento</option>
ย ย </select>
ย ยย
ย ย <input id="valorDeslocamentoKm" type="text" value="R$ 0,00" style="display:none;" oninput="formatarMoeda(this); atualizarFinanceiro();">
ย ย <input id="valorDeslocamentoTotal" type="text" value="R$ 0,00" style="display:none;" oninput="formatarMoeda(this); atualizarFinanceiro();">
</div>
ย ย ย ย ย ย <li class="ponto-item sortable-item" id="li-origem">
ย ย ย ย ย ย ย ย <span class="handle">โฐ</span>
ย ย ย ย ย ย ย ย <input id="origem" type="text" placeholder="Origem" autocomplete="off">
ย ย ย ย ย ย </li>
ย ย ย ย ย ย <li class="ponto-item sortable-item" id="li-destino">
ย ย ย ย ย ย ย ย <span class="handle">โฐ</span>
ย ย ย ย ย ย ย ย <input id="destino" type="text" placeholder="Destino" autocomplete="off">
ย ย ย ย ย ย </li>
ย ย ย ย </ul>
<div class="grid-configs" style="margin-top: 10px;">
ย ย ย ย ย ย <div>
ย ย ย ย ย ย ย ย <label class="label-custo">DESCARGA (R$)</label>
ย ย ย ย ย ย ย ย <input id="valorDescarga" type="text" value="R$ 0,00" oninput="formatarMoeda(this); atualizarFinanceiro();">
ย ย ย ย ย ย </div>
ย ย ย ย ย ย <div>
ย ย ย ย ย ย ย ย <label class="label-custo">OUTRAS DESPESAS (R$)</label>
ย ย ย ย ย ย ย ย <input id="valorOutrasDespesas" type="text" value="R$ 0,00" oninput="formatarMoeda(this); atualizarFinanceiro();">
ย ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย ย ย <button class="btn-add" id="btnAddParada" onclick="adicionarParada()">+ Adicionar Parada</button>

ย ย ย ย <div class="grid-configs">
ย ย ย ย ย ย <div>
ย ย ย ย ย ย ย ย <label class="label-custo">VALOR POR KM</label>
ย ย ย ย ย ย ย ย <input id="valorPorKm" type="text" value="R$ 0,00" oninput="formatarMoeda(this); atualizarFinanceiro();">
ย ย ย ย ย ย </div>
ย ย ย ย ย ย <div>
ย ย ย ย ย ย ย ย <label class="label-custo">ALรQUOTA IMPOSTO</label>
ย ย ย ย ย ย ย ย <select id="imposto">
ย ย ย ย ย ย ย ย ย ย ย <option value="1">Isento (0%)</option>
ย ย ย ย ย ย ย ย ย ย ย <option value="0.93">7%</option>
ย ย ย ย ย ย ย ย ย ย ย <option value="0.88">12%</option>
ย ย ย ย ย ย ย ย ย ย ย <option value="0.83">17%</option>
ย ย ย ย ย ย ย ย ย ย ย <option value="0.825">17,5%</option>
ย ย ย ย ย ย ย ย ย ย ย <option value="0.82">18%</option>
ย ย ย ย ย ย ย ย ย ย ย <option value="0.81">19%</option>
ย ย ย ย ย ย ย ย ย ย ย <option value="0.80">20%</option>
ย ย ย ย ย ย ย ย ย ย ย <option value="0.795">20,5%</option>
ย ย ย ย ย ย ย ย ย ย ย <option value="0.79">21%</option>
ย ย ย ย ย ย ย ย ย ย ย <option value="0.78">22%</option>
ย ย ย ย ย ย ย ย ย ย ย <option value="0.77">23%</option>
ย ย ย ย ย ย ย ย </select>
ย ย ย ย ย ย </div>
ย ย ย ย </div>

ย ย ย ย <button class="btn-gestao" onclick="toggleCustos()" style="margin-top: 15px;">Painel de Custos (Extra)</button>

ย ย ย ย <div class="financeiro">
ย ย ย ย ย ย <div class="row">KM Deslocado (Vazio) <span><b id="txt-km-vazio-det">0,0 km</b></span></div>
ย ย ย ย ย ย <div class="row">KM Frete (Carregado) <span><b id="txt-km-rota-det">0,0 km</b></span></div>
ย ย ย ย ย ย <div class="row total-row">KM Total <b id="txt-km-total">0,0 km</b></div>
ย ย ย ย ย ย <div class="row km-real">R$/Km Real <b id="txt-km-real">R$ 0,00</b></div>

ย ย ย ย ย ย <div class="container-barra">
ย ย ย ย ย ย ย ย <div id="visual-vazio" class="barra-vazio"></div>
ย ย ย ย ย ย ย ย <div id="visual-rota" class="barra-rota"></div>
ย ย ย ย ย ย </div>
ย ย ย ย ย ย <div class="perc-labels">
ย ย ย ย ย ย ย ย <span class="vazio">Vazio: <span id="perc-vazio">0%</span></span>
ย ย ย ย ย ย ย ย <span class="rota">Rota: <span id="perc-rota">100%</span></span>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย <div class="row">Frete Base <span><b id="txt-frete-base">R$ 0,00</b></span></div>
ย ย ย ย ย ย <div class="row">Deslocamento <span><b id="txt-valor-deslocamento-fin">R$ 0,00</b></span></div>
ย ย ย ย ย ย <div class="row">Imposto <span><b id="txt-valor-imp">R$ 0,00</b></span></div>
ย ย ย ย ย ย <div class="frete-destaque">
ย ย ย ย ย ย ย ย <span class="destaque-label">TOTAL TOTAL</span>
ย ย ย ย ย ย ย ย <span id="txt-frete-total">R$ 0,00</span>
ย ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย </div>

ย ย <div id="painel-custos-extra">
ย ย ย ย <div class="header-sidebar">
ย ย ย ย ย ย <h2>Custos Adicionais</h2>
ย ย ย ย ย ย <button class="btn-limpar" onclick="limparPainelCustos()">Limpar</button>
ย ย ย ย </div>
ย ย ย ยย
ย ย ย ย <div class="secao-custo">
ย ย ย ย ย ย <label class="label-custo">Veรญculo da Frota</label>
ย ย ย ย ย ย <select id="selFrotaVinculo" onchange="vincularFrota(this)"></select>
ย ย ย ย </div>

ย ย ย ย <div class="secao-custo">
ย ย ย ย ย ย <label class="label-custo">Diesel</label>
ย ย ย ย ย ย <div class="grid-configs no-margin">
ย ย ย ย ย ย ย ย <div><span class="sub-label">PREรO/L</span><input type="text" id="custoDieselLitro" placeholder="R$ 0,00" oninput="formatarMoeda(this)"></div>
ย ย ย ย ย ย ย ย <div><span class="sub-label">MรDIA KM/L</span><input type="number" id="consumoDieselMedia" placeholder="Ex: 2.5" step="0.1"></div>
ย ย ย ย ย ย </div>
ย ย ย ย </div>

ย ย ย ย <div class="secao-custo">
ย ย ย ย ย ย <label class="label-custo">Arla 32</label>
ย ย ย ย ย ย <div class="grid-configs no-margin">
ย ย ย ย ย ย ย ย <div><span class="sub-label">PREรO/L</span><input type="text" id="custoArlaLitro" placeholder="R$ 0,00" oninput="formatarMoeda(this)"></div>
ย ย ย ย ย ย ย ย <div><span class="sub-label">% DO DIESEL</span><input type="number" id="arlaPorcentagem" placeholder="Ex: 5" step="0.1"></div>
ย ย ย ย ย ย </div>
ย ย ย ย </div>

ย ย ย ย <div class="secao-custo">
ย ย ย ย ย ย <div class="grid-configs no-margin">
ย ย ย ย ย ย ย ย <div>
ย ย ย ย ย ย ย ย ย ย <label class="label-custo">Pedรกgios</label>
ย ย ย ย ย ย ย ย ย ย <input type="text" id="custoPedagio" placeholder="Valor Total R$" oninput="formatarMoeda(this)">
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <div>
ย ย ย ย ย ย ย ย ย ย <label class="label-custo">Manutenรงรฃo (por KM)</label>
ย ย ย ย ย ย ย ย ย ย <input type="text" id="custoManutencaoKm" placeholder="R$ 0,00 por KM" oninput="formatarMoeda(this)">
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย </div>
ย ย ย ย </div>

ย ย ย ย <div class="secao-custo">
ย ย ย ย ย ย <div class="grid-configs no-margin split-carga">
ย ย ย ย ย ย ย ย <div>
ย ย ย ย ย ย ย ย ย ย <label class="label-custo">Tipo de Carga</label>
ย ย ย ย ย ย ย ย ย ย <select id="tipoCarga" onchange="toggleAparelhoFrio()">
ย ย ย ย ย ย ย ย ย ย ย ย <option value="seca">Carga Seca</option>
ย ย ย ย ย ย ย ย ย ย ย ย <option value="frigorifica">Carga Frigorรญfica</option>
ย ย ย ย ย ย ย ย ย ย ย ย <option value="granel">Carga a Granel</option>
ย ย ย ย ย ย ย ย ย ย ย ย <option value="sider">Carga Sider</option>
ย ย ย ย ย ย ย ย ย ย ย ย <option value="outros">Outros</option>
ย ย ย ย ย ย ย ย ย ย </select>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <div id="container-frio-input" style="display:none;">
ย ย ย ย ย ย ย ย ย ย <label class="label-custo">Consumo Frio L/H</label>
ย ย ย ย ย ย ย ย ย ย <input type="number" id="consumoFrioHora" placeholder="Ex: 2.5" step="0.1">
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย </div>
ย ย ย ย </div>

ย ย ย ย <div id="container-frio-datas" style="display:none;">
ย ย ย ย ย ย <div id="alerta-datas-frio" class="alerta-erro">โ๏ธ Informar Coleta e Entrega para Cรกlculo do Aparelho Frio</div>
ย ย ย ย ย ย <div id="alerta-erro-datas" class="alerta-erro">โ๏ธ Previsรฃo Entrega nรฃo pode ser anterior a Previsรฃo Coleta</div>
ย ย ย ย ย ยย
ย ย ย ย ย ย <div class="secao-custo">
ย ย ย ย ย ย ย ย <div class="grid-configs">
ย ย ย ย ย ย ย ย ย ย <div>
ย ย ย ย ย ย ย ย ย ย ย ย <label class="label-custo">Previsรฃo Coleta</label>
ย ย ย ย ย ย ย ย ย ย ย ย <input type="datetime-local" id="prevColeta">
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย <div>
ย ย ย ย ย ย ย ย ย ย ย ย <label class="label-custo">Previsรฃo Entrega</label>
ย ย ย ย ย ย ย ย ย ย ย ย <input type="datetime-local" id="prevEntrega">
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย </div>
ย ย ย ย </div>

ย ย ย ย <div class="financeiro operacional-box">
ย ย ย ย ย ย <div class="row oper-title">RESULTADO OPERACIONAL</div>
ย ย ย ย ย ยย
ย ย ย ย ย ย <div id="analise-custos-detalhada" class="custos-list">
ย ย ย ย ย ย ย ย <div class="row">Custo Diesel <span id="txt-an-diesel">R$ 0,00</span></div>
ย ย ย ย ย ย ย ย <div class="row">Custo Arla <span id="txt-an-arla">R$ 0,00</span></div>
ย ย ย ย ย ย ย ย <div class="row">Custo Pedรกgio <span id="txt-an-pedagio">R$ 0,00</span></div>
ย ย ย ย ย ย ย ย <div class="row">Custo Manut. <span id="txt-an-manut">R$ 0,00</span></div>
ย ย ย ย ย ย ย ย <div class="row" id="row-an-frio" style="display:none;">Custo Ap. Frio <span id="txt-an-frio">R$ 0,00</span></div>
ย ย ย ย ย ย </div>

ย ย ย ย ย ย <div class="row bold-row">Frete Total <span id="txt-frete-total-extra">R$ 0,00</span></div>
ย ย ย ย ย ย <div class="row bold-row">Imposto <span id="txt-an-imposto">R$ 0,00</span></div>
ย ย ย ย ย ย <div class="row bold-row">Total Custos <span id="txt-total-custos">R$ 0,00</span></div>
ย ย ย ย ย ยย
ย ย ย ย ย ย <div class="frete-destaque lucro-destaque" id="destaque-lucro">
ย ย ย ย ย ย ย ย <span class="destaque-label">LUCRO ESTIMADO</span>
ย ย ย ย ย ย ย ย <span id="txt-lucro-real">R$ 0,00</span>
ย ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย ย ย <button class="calc-btn" onclick="toggleCustos()">Fechar Custos</button>
ย ย </div>

ย ย <div class="map-container">
ย ย ย ย <div id="map" style="height: 100%; width: 100%;"></div>
ย ย ย ย <div id="painel-roteiro-escrito">
ย ย ย ย ย ย <div class="header-roteiro">
ย ย ย ย ย ย ย ย <h2>Resumo do Percurso (Estilo AE)</h2>
ย ย ย ย ย ย ย ย <span style="cursor:pointer; font-size:24px;" onclick="toggleGoogleMaps()">&times;</span>
ย ย ย ย ย ย </div>
ย ย ย ย ย ย <div id="lista-passo-a-passo">
ย ย ย ย ย ย ย ย <p style="padding: 20px; color: var(--text-sub);">Calcule uma rota para visualizar o roteiro resumido.</p>
ย ย ย ย ย ย </div>
ย ย ย ย </div>
ย ย </div>
</div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyClbY5ZvkjrMGP4nJmZzCcm4hUu5-fjZV0&libraries=places&callback=initMap" async defer></script>
<script src="script.js?v=1.0.2"></script>
</body>
</html>
